<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>رسم الدوال</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.18.0/plotly.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f8f9fa;
            direction: rtl;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        #plot {
            width: 100%;
            height: 500px;
            margin: 20px 0;
        }
        select {
            font-size: 1rem;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <label for="functionSelect">اختر الدالة:</label>
        <select id="functionSelect">
            <option value="Cg">C<sub>g</sub></option>
            <option value="Cf">C<sub>f</sub></option>
            <option value="Ch">C<sub>h</sub></option>
        </select>
        <div id="plot"></div>
    </div>

    <script>
        function plotCg() {
            const x=[], y=[];
            // Segment 1: (-1,3) → (0,0) nonlinear
            for(let i=0;i<=100;i++) {
                let t=i/100;
                x.push(-1 + t);
                y.push(3*(1 - t*t)); // quadratic down
            }
            // Segment 2: (0,0) → (1,1) linear
            for(let i=1;i<=100;i++) {
                let t=i/100;
                x.push(t);
                y.push(t);
            }
            // Segment 3: (1,1) → (2,-2) nonlinear
            for(let i=1;i<=100;i++) {
                let t=i/100;
                x.push(1 + t);
                y.push(1 - 3*t*t); // quadratic down
            }
            return [{ x, y, type:'scatter', mode:'lines', name:'C<sub>g</sub>', line:{color:'#2E7D32',width:3} }];
        }

        function plotCf() {
            const x=[], y=[];
            for(let i=0;i<=300;i++) {
                let t=i/300;
                x.push(-1 + 3*t); // -1 to 2
                y.push(-2 + 5*t*t*t); // smooth increasing cubic
            }
            return [{ x, y, type:'scatter', mode:'lines', name:'C<sub>f</sub>', line:{color:'#1565C0',width:3} }];
        }

function plotCh() {
    const x=[], y=[];
    // Segment 1: (-1,-2) → (0,0)
    for(let i=0;i<=100;i++) {
        let t=i/100;
        x.push(-1 + t);
        y.push(-2 + 2*t);
    }
    // Insert a break (null) for vertical jump
    x.push(0);
    y.push(null);
    // Segment 2: (0,1) → (2,3)
    for(let i=0;i<=100;i++) {
        let t=i/100;
        x.push(0 + 2*t);
        y.push(1 + 2*t);
    }
    return [
        { x, y, type:'scatter', mode:'lines', name:'C<sub>h</sub>', line:{color:'#F9A825',width:3} }
    ];
}


        function updatePlot() {
            const func = document.getElementById('functionSelect').value;
            let traces;
            if (func === 'Cg') traces = plotCg();
            else if (func === 'Cf') traces = plotCf();
            else traces = plotCh();

            const layout = {
                xaxis: {
                    title: 'x', range: [-1.5, 2.5],
                    showgrid: true, gridcolor: '#E0E0E0',
                    zeroline: true, zerolinecolor: '#999', zerolinewidth: 1
                },
                yaxis: {
                    title: 'y', range: [-3,4],
                    showgrid: true, gridcolor: '#E0E0E0',
                    zeroline: true, zerolinecolor: '#999', zerolinewidth: 1
                },
                plot_bgcolor: '#FAFAFA',
                paper_bgcolor: 'white',
                showlegend: true,
                legend: { x:0.02, y:0.98, bgcolor:'rgba(255,255,255,0.9)', bordercolor:'#E0E0E0', borderwidth:1 },
                margin: { l: 60, r: 40, t: 40, b: 50 }
            };
            const config = { responsive: true, displayModeBar: false, displaylogo: false };
            Plotly.newPlot('plot', traces, layout, config);
        }

        document.getElementById('functionSelect').addEventListener('change', updatePlot);

        updatePlot(); // initial plot
    </script>
</body>
</html>
